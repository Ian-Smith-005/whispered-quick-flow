<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Diacare | Dashboard</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!--fontawesome icons-->
    <script
      src="https://kit.fontawesome.com/f3068f95b3.js"
      crossorigin="anonymous"
    ></script>

    <!--favicon-->
    <link
      rel="shortcut icon"
      href="assets/img/logo_&_favicon/logo_diacare.png"
      type="image/x-icon"
    />

    <!--Graph JS-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!--Google Fonts-->
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/dashboard.css" />
    <link rel="stylesheet" href="assets/css/ai.css" />
    <link rel="stylesheet" href="assets/css/user.css" />
  </head>

  <body>
    <!--account deletion modal -->
    <!-- Delete Confirmation Modal -->
    <!-- Delete Confirmation Modal -->
    <div
      class="modal fade"
      id="deleteModal"
      tabindex="-1"
      aria-labelledby="deleteModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content border-danger">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="deleteModalLabel">
              Confirm Account Deletion
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p class="mb-3">
              Type <strong>DELETE</strong> to confirm permanent account deletion.
            </p>
            <input
              type="text"
              id="deleteConfirmInput"
              class="form-control"
              placeholder="Type DELETE to confirm"
            />
            <div id="deleteError" class="text-danger small mt-2 d-none">
              ❌ You must type DELETE in uppercase to proceed.
            </div>
            <div id="deleteSuccess" class="text-success small mt-2 d-none">
              ✅ Account successfully deleted. Redirecting...
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">
              Cancel
            </button>
            <button class="btn btn-danger" id="confirmDeleteBtn">
              Confirm Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Preloader (for initial load and section change) -->
    <div class="preloader-overlay" id="sectionPreloader">
      <div class="ripple-loader">
        <span class="circle"></span>
        <span class="circle"></span>
        <span class="circle"></span>
        <div class="center-dot"></div>
      </div>
    </div>

    <!-- Sidebar Navigation (Desktop) -->
    <div class="sidebar d-none d-md-block">
      <h4 class="text-center text-success fw-bold mb-4">Diacare</h4>
      <nav class="nav flex-column">
        <a href="#" class="nav-link active" data-target="dashboard"
          ><i class="fa-solid fa-chart-line"></i> Dashboard</a
        >
        <a href="#" class="nav-link" data-target="mealplans"
          ><i class="fa-solid fa-utensils"></i> Meal Plans</a
        >
        <a href="#" class="nav-link" data-target="analysis"
          ><i class="fa-solid fa-brain"></i> Analysis</a
        >
        <a href="#" class="nav-link" data-target="tips"
          ><i class="fa-regular fa-lightbulb"></i> Tips</a
        >
        <a href="#" class="nav-link" data-target="profile"
          ><i class="fa-regular fa-user"></i> Profile</a
        >
      </nav>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav d-flex d-md-none justify-content-around">
      <a href="#" class="nav-link active" data-target="dashboard"
        ><i class="fa-solid fa-chart-line"></i
      ></a>
      <a href="#" class="nav-link" data-target="mealplans"
        ><i class="fa-solid fa-utensils"></i
      ></a>
      <a href="#" class="nav-link" data-target="analysis"
        ><i class="fa-solid fa-brain"></i
      ></a>
      <a href="#" class="nav-link" data-target="tips"
        ><i class="fa-regular fa-lightbulb"></i
      ></a>
      <a href="#" class="nav-link" data-target="profile"
        ><i class="fa-regular fa-user"></i
      ></a>
    </nav>

    <!-- Main Content -->
    <div class="main-content-wrapper">
      <div id="dashboard" class="content-section active">
        <!--tab one dashboard-->
        <div class="container my-4">
          <!-- Row 1: Quick Stats -->
          <div class="row mb-4">
            <div class="col-md-3">
              <div class="card text-center shadow-sm">
                <div class="card-body">
                  <h6 class="card-title">Current Glucose</h6>
                  <h4 class="text-success">108 mg/dL</h4>
                  <p class="text-muted">Normal Range</p>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card text-center shadow-sm">
                <div class="card-body">
                  <h6 class="card-title">Last Meal</h6>
                  <p>Grilled chicken & salad</p>
                  <span class="badge bg-success">Low Impact</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card text-center shadow-sm">
                <div class="card-body">
                  <h6 class="card-title">Medication</h6>
                  <p>Metformin 500mg</p>
                  <p class="text-muted">2 hrs ago</p>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card text-center shadow-sm">
                <div class="card-body">
                  <h6 class="card-title">Activity</h6>
                  <p>Steps: 3,200</p>
                  <span class="badge bg-warning text-dark">Goal: 8,000</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Row 2: Glucose Chart + Meals -->
          <div class="row mb-4">
            <div class="col-md-8">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Glucose Trend (Past 7 Days)</h5>
                  <canvas id="glucoseChartdash" height="150"></canvas>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Today's Meals</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      Oatmeal & berries
                      <span class="badge bg-success float-end">Good</span>
                    </li>
                    <li class="list-group-item">
                      Chicken wrap
                      <span class="badge bg-info float-end">Neutral</span>
                    </li>
                    <li class="list-group-item">
                      White rice
                      <span class="badge bg-danger float-end">Spike</span>
                    </li>
                  </ul>
                  <a href="#" data-target="mealplans">
                    <button
                      class="btn btn-sm btn-outline-primary mt-3 w-100 add-meal-btn"
                    >
                      Add Meal
                    </button>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Row 3: AI Analysis & Recommendations -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Recent AI Analysis</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      White rice caused a spike of 30 mg/dL.
                    </li>
                    <li class="list-group-item">
                      Glucose steady after quinoa bowl.
                    </li>
                    <li class="list-group-item">
                      Sugary drinks flagged twice this week.
                    </li>
                  </ul>
                  <a href="#" data-target="analysis">
                    <button
                      class="btn btn-sm btn-outline-success mt-3 AI-analysis-btn"
                    >
                      View All
                    </button>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Food Recommendations</h5>
                  <div class="alert alert-success mb-2">
                    Try a quinoa bowl for dinner – low GI and nutrient-rich.
                  </div>
                  <div class="alert alert-warning mb-2">
                    Reduce white rice intake – repeated spike detected.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Row 4: News + Weekly Goals -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Latest News</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      <strong>Study:</strong> Low-carb diets improve Type 2
                      diabetes outcomes.
                    </li>
                    <li class="list-group-item">
                      <strong>FDA:</strong> Approves new CGM tech for home use.
                    </li>
                    <li class="list-group-item">
                      <strong>Nutrition Tip:</strong> Avoid hidden sugars in
                      sauces.
                    </li>
                  </ul>
                  <a href="#" data-target="tips">
                    <button
                      class="btn btn-sm btn-outline-secondary mt-3 tips-btn"
                    >
                      More Articles
                    </button>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Weekly Goal Progress</h5>
                  <p>
                    In target glucose range: <strong>60%</strong> (Goal: 80%)
                  </p>
                  <div class="progress mb-3">
                    <div class="progress-bar bg-success" style="width: 60%">
                      60%
                    </div>
                  </div>
                  <p>Meals logged: <strong>5 / 7 days</strong></p>
                  <div class="progress">
                    <div class="progress-bar bg-info" style="width: 71%">
                      71%
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Row 5: Meal Plan -->
          <div class="row mb-5">
            <div class="col-md-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Suggested Meal Plan</h5>
                  <div class="row">
                    <div class="col-md-4">
                      <strong>Breakfast:</strong>
                      <ul>
                        <li>Oatmeal with chia seeds</li>
                        <li>Green tea</li>
                      </ul>
                    </div>
                    <div class="col-md-4">
                      <strong>Lunch:</strong>
                      <ul>
                        <li>Grilled salmon</li>
                        <li>Steamed vegetables</li>
                        <li>Quinoa</li>
                      </ul>
                    </div>
                    <div class="col-md-4">
                      <strong>Dinner:</strong>
                      <ul>
                        <li>Lentil soup</li>
                        <li>Mixed greens salad</li>
                        <li>Avocado toast</li>
                      </ul>
                    </div>
                  </div>
                  <a href="#" data-target="mealplans">
                    <button
                      class="btn btn-sm btn-outline-success mt-3 add-meal-btn"
                    >
                      Customize Plan
                    </button>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Row: AI Searches + Appointments -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Recent AI Prompts</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      Analyze sweet potato glycemic index
                    </li>
                    <li class="list-group-item">
                      What’s in this meal (uploaded image)
                    </li>
                    <li class="list-group-item">
                      Suggest low-carb Kenyan lunch ideas
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Upcoming Appointments</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      Endocrinologist – June 25 @ 10:00 AM
                    </li>
                    <li class="list-group-item">
                      HbA1c Lab Test – July 2 @ 8:30 AM
                    </li>
                    <li class="list-group-item">Dietician Check-In – July 8</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Row: Weight & BP Trends -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Weight Trend (Last 6 Weeks)</h5>
                  <canvas id="weightChartdash" height="150"></canvas>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Blood Pressure Trend</h5>
                  <canvas id="bpChartdash" height="150"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Row: Daily Tips -->
          <div class="row mb-5">
            <div class="col-md-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Daily Wellness Tip</h5>
                  <blockquote class="blockquote mb-0">
                    <p>
                      🚶‍♂️ A 15-minute walk after meals can significantly improve
                      your blood sugar control.
                    </p>
                    <footer class="blockquote-footer">AI Care Assistant</footer>
                  </blockquote>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="mealplans" class="content-section">
        <h2>Meal Plans</h2>
        <p>AI-powered recommendations tailored to you.</p>
      </div>

      <!--Artificial Intelligence page-->
      <div id="analysis" class="content-section">
        <div class="chat-wrapper">
          <!-- Header -->
          <div class="chat-header">Diacare Assistant</div>
          <button
            id="clearChat"
            class="btn btn-danger btn-sm mb-2 mx-auto d-block"
          >
            <i class="fa-regular fa-trash-can"></i> Clear Chat History
          </button>
          <!-- Chat Messages -->
          <div class="chat-messages d-flex flex-column" id="chatMessages">
            <div class="chat-message bot">
              👋 Hello! I'm here to help you manage your meals and health.
            </div>
          </div>

          <!-- Input Area -->
          <div class="chat-input-area">
            <form id="chatForm" class="chat-input-bar">
              <input
                type="text"
                id="chatInput"
                placeholder="Type your message..."
                autocomplete="off"
              />
              <button class="btn-success-send" type="submit">
                <i class="fas fa-arrow-up"></i>
              </button>

              <!-- Plus button -->
              <button class="plus-btn" id="plusBtn" type="button">
                <i class="fas fa-plus"></i> Attatch
              </button>
              <!--Voice icon-->
              <button class="voice-btn" type="button">
                <i class="fa-solid fa-microphone-lines"></i> Voice
              </button>

              <!-- Upload menu -->
              <div class="upload-menu" id="uploadMenu">
                <div class="upload-menu-item" id="takePhotoBtn">
                  <i class="fas fa-camera"></i> Take a Photo
                </div>
                <div class="upload-menu-item" id="uploadFileBtn">
                  <i class="fas fa-upload"></i> Upload a File
                </div>
              </div>

              <!--upload hidden input-->
              <!-- Hidden file input -->
              <input
                type="file"
                id="imageInput"
                accept="image/*"
                capture="environment"
                style="display: none"
              />
            </form>
            <br />
          </div>
        </div>
      </div>
      <!--Artificial Intelligence page-->

      <div id="tips" class="content-section">
        <h2>Health Tips</h2>
        <ul>
          <li>Stay hydrated</li>
          <li>Monitor carb intake</li>
          <li>Exercise regularly</li>
        </ul>
      </div>

      <div id="profile" class="content-section">
        <!-- Navbar -->

        <!-- Content -->
        <div class="container my-4">
          <!-- User Info + Glucose Chart -->
          <div class="row mb-4">
            <!-- Profile Card -->
            <div class="col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">User Profile</h5>
                  <p><strong>Name:</strong> Jane Doe</p>
                  <p><strong>Condition:</strong> Type 2 Diabetes</p>
                  <p><strong>Diagnosed:</strong> Jan 2021</p>
                  <p><strong>Age:</strong> 45</p>
                </div>
              </div>
            </div>

            <!-- Glucose + Metrics -->
            <div class="col-md-8">
              <div class="card shadow-sm mb-3">
                <div class="card-body">
                  <h5 class="card-title">Latest Health Metrics</h5>
                  <div class="row text-center">
                    <div class="col-md-3">
                      <p><strong>Glucose</strong></p>
                      <h4 class="text-success">112 mg/dL</h4>
                    </div>
                    <div class="col-md-3">
                      <p><strong>HbA1c</strong></p>
                      <h4>6.3%</h4>
                    </div>
                    <div class="col-md-3">
                      <p><strong>Weight</strong></p>
                      <h4>165 lbs</h4>
                    </div>
                    <div class="col-md-3">
                      <p><strong>Blood Pressure</strong></p>
                      <h4>120/80</h4>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Glucose Chart -->
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Glucose Trend</h5>
                  <canvas id="glucoseChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Additional Graphs -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Weight Trend</h5>
                  <canvas id="weightChart"></canvas>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Blood Pressure Trend</h5>
                  <canvas id="bpChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Logs -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Recent Glucose Readings</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      June 22, 7:30 AM — <strong>102 mg/dL</strong>
                    </li>
                    <li class="list-group-item">
                      June 21, 12:45 PM — <strong>135 mg/dL</strong>
                    </li>
                    <li class="list-group-item">
                      June 20, 8:00 PM — <strong>118 mg/dL</strong>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Recent Meals Logged</h5>
                  <ul class="list-group">
                    <li class="list-group-item">
                      Oatmeal w/ berries — <em>low impact</em>
                    </li>
                    <li class="list-group-item">
                      Grilled chicken & veggies — <em>neutral</em>
                    </li>
                    <li class="list-group-item">
                      White rice bowl — <em>high spike</em>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Suggestions -->
          <div class="row mb-4">
            <div class="col-md-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">Food Suggestions</h5>
                  <div class="row">
                    <div class="col-md-4">
                      <div class="alert alert-success">
                        <strong>Try:</strong> Quinoa & mixed greens<br />
                        <small>Stable post-meal glucose</small>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="alert alert-success">
                        <strong>Snack:</strong> Greek yogurt & nuts<br />
                        <small>Low-carb, protein-rich</small>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="alert alert-warning">
                        <strong>Avoid:</strong> Sugary cereal<br />
                        <small>Caused spike to 170 mg/dL</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Account Buttons -->
          <div class="text-center mb-5">
            <button
              class="btn btn-danger me-2 delete-btn-custom"
              data-bs-toggle="modal"
              data-bs-target="#deleteModal"
            >
              Delete Account
            </button>

            <a href="/"
              ><button class="btn btn-secondary logout-btn-custom">
                Logout
              </button></a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- JS -->
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/ai.js"></script>
    <script src="assets/js/account_deletion.js"></script>
    <script src="assets/js/graph_js/dashboard_user_graph.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
